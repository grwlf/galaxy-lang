\documentclass{article}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{amsmath,amssymb}
\usepackage[russian,english]{babel}
\usepackage{minted}
\renewcommand{\MintedPygmentize}{/nix/store/9r8n35slzprv3q4hfdnc0fz3r70z2y64-python3.7-Pygments-2.7.2/bin/pygmentize}
\usepackage[rerun=always]{pythontex}
\newcommand{\pymultiply}[2]{\py{#1*#2}}
\usepackage[a4paper, total={6in, 8in}]{geometry}

\newenvironment{pyconcodeblock}%
 {\VerbatimEnvironment
  \begin{VerbatimOut}{_temp.py}}%
 {\end{VerbatimOut}%
  \pyconc{exec(compile(open('_temp.py', 'rb').read(), '_temp.py', 'exec'))}%
  \inputpygments{python}{_temp.py}}


\begin{document}
\selectlanguage{russian}

Hello, TeX table!

\par

\begin{tabular}{|p{0.5\textwidth}|p{0.5\textwidth}|}

\hline

Python & Nix

\\

\begin{pyconcodeblock}
from typing import Callable, Iterator
import numpy as np

def unfold(next:Callable[[float],float]
           )->Iterator[float]:
  x=1.0
  while x<20:
    x2=next(x)
    yield x2
    x=x2

def _step(x):
  return x+x
\end{pyconcodeblock}

\begin{pyconsole}
[x for x in unfold(_step)]
\end{pyconsole}

&

\begin{minted}{nix}
{ pkgs ?  import ./3rdparty/nixpkgs {}
, stdenv ? pkgs.stdenv
} :
let
  self = pkgs.python37Packages;
in
  self
\end{minted}


\\

C

&

D

\\

\hline
\end{tabular}

\end{document}

